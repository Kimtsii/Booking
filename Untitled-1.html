<!DOCTYPE html>
<html>
<head>
  <title>FCP Booking System</title>
  <style>
    * {
      box-sizing: border-box;
    }

    body {
      font-family: Arial, sans-serif;
      margin: 0;
      padding: 20px;
    }

    h1 {
      text-align: center;
    }

    .form-container {
      display: flex;
      flex-direction: column;
      gap: 20px;
    }

    .form-column {
      padding: 10px;
      border: 1px solid #ccc;
      border-radius: 5px;
    }

    .form-row {
      margin-bottom: 10px;
    }

    .form-label {
      display: block;
      margin-bottom: 5px;
      font-weight: bold;
    }

    .form-input {
      width: 100%;
      padding: 5px;
      border: 1px solid #ccc;
      border-radius: 3px;
    }

    .details-column {
      padding: 10px;
      border: 1px solid #ccc;
      border-radius: 5px;
    }

    select[name="package"] {
      padding: 5px;
    }

    .result-container {
      margin-top: 10px;
    }

    .result-label {
      margin-right: 10px;
    }

    .estimate-button {
      margin-top: 10px;
    }

    .book-now-button {
      margin-top: 10px;
      background-color: #4CAF50;
      color: #fff;
      border: none;
      padding: 10px 20px;
      border-radius: 3px;
      cursor: pointer;
    }

    /* Modal styles */
    .modal {
      display: none;
      position: fixed;
      z-index: 1;
      left: 0;
      top: 0;
      width: 100%;
      height: 100%;
      overflow: auto;
      background-color: rgba(0, 0, 0, 0.4);
    }

    .modal-content {
  background-color: black;
  margin: 10% auto;
  padding: 20px;
  border: 1px solid #888;
  width: 80%;
  max-width: 600px;
  border-radius: 5px;
  color: white; /* Set text color to white for better visibility */
}


    .close {
      color: #888;
      float: right;
      font-size: 28px;
      font-weight: bold;
      cursor: pointer;
    }

    .close:hover,
    .close:focus {
      color: #000;
      text-decoration: none;
      cursor: pointer;
    }

    @media (min-width: 600px) {
      .form-container {
        flex-direction: row;
        gap: 20px;
      }

      .form-column {
        flex-basis: 50%;
        padding: 0;
      }

      .details-column {
        flex-basis: 50%;
        padding: 0;
      }

      .result-container {
        align-items: center;
      }


    }
  </style>
</head>
<body>
  <h1>FCP Booking System</h1>

  <div class="form-container">
    <div class="form-column">
      <h2>Select a Package:</h2>
      <form id="bookingForm" onsubmit="return false;">
        <div class="form-row">
          <select name="package" onchange="showPackageDetails(this.value)">
            <option value="All-Inclusive Fitness Package">All-Inclusive Fitness Package</option>
            <option value="All-Inclusive Weight Loss Package">All-Inclusive Weight Loss Package</option>
            <option value="All-Inclusive Training Package">All-Inclusive Training Package</option>
          </select>
        </div>

        <div class="form-row">
            <label class="form-label" for="roomType">Room Type:</label>
            <select name="roomType" id="roomType" required>
              <option value="">Select Room Type</option>
              <option value="Deluxe Duplex">Deluxe Duplex</option>
              <option value="Executive Villa">Executive Villa</option>
            </select>
          </div>
          

        
        <div class="form-row">
          <label class="form-label" for="stayDuration">Number of Weeks:</label>
          <input class="form-input" type="number" name="stayDuration" id="stayDuration" min="1" required>
        </div>

        <div class="form-row">
          <label class="form-label" for="numPeople">Additional Person:</label>
          <input class="form-input" type="number" name="numPeople" id="numPeople" min="1" required>
        </div>

        <div class="form-row">
          <label class="form-label" for="numChild">Additional child (4-12 years old):</label>
          <input class="form-input" type="number" name="numChild" id="numChild" min="0">
        </div>


        <div class="form-row">
            <label class="form-label" for="checkInDate">Check-In Date:</label>
            <input class="form-input" type="date" name="checkInDate" id="checkInDate" required>
          </div>
  
          <div class="form-row">
            <label class="form-label" for="checkOutDate">Check-Out Date:</label>
            <input class="form-input" type="date" name="checkOutDate" id="checkOutDate" required>
          </div>

        <button class="estimate-button" onclick="showEstimateCost()">View Estimate Cost</button>
        <div class="result-container">
          <span class="result-label">Total Price:</span>
          <span id="totalPrice"></span>
        </div>
        <button class="book-now-button" onclick="showConfirmationModal()">Book Now</button>
      </form>
    </div>

    <div class="details-column">
      <h2>Package Details:</h2>
      <div id="packageDetails"></div>
    </div>
  </div>

  <!-- Modal for Confirmation -->
<!-- Modal for Confirmation -->
<!-- Modal for Confirmation -->
<!-- Modal for Confirmation -->
<div id="confirmationModal" class="modal">
    <div class="modal-content">
      <span class="close" onclick="closeConfirmationModal()">&times;</span>
      <h2>Confirmation</h2>

     
      

      <div class="form-row">
        <label class="form-label" for="package">Selected Package   : <span id="confirmPackage"></span></label>
      </div>

      <div class="form-row">
        <label class="form-label" for="roomType">Selected Room   : <span id="confirmRoomType"></span></label>
      </div>


      <div class="form-row">
        <label class="form-label" for="stayDuration">Number of Weeks: <span id="confirmStayDuration"></span></label>
      </div>

      <div class="form-row">
        <label class="form-label" for="checkInDate">Check-In Date: <span id="confirmCheckInDate"></span></label>
      </div>
  
      <div class="form-row">
        <label class="form-label" for="checkOutDate">Check-Out Date:      <span id="confirmCheckOutDate"> </span></label>
      </div>


      <div class="form-row">
        <label class="form-label" for="numPeople">Additional Person: <span id="confirmNumPeople"></span></label>
      </div>

      
      <div class="form-row">
        <label class="form-label" for="numChild">Additional Child: <span id="confirmNumChild"></span></label>
      </div>

      
      <div class="form-row">
        <label class="form-label" for="estimateCost">Estimated Cost:  <span id="confirmEstimateCost"></span></label>
      </div>

      <div class="form-row">
        <label class="form-label" for="firstName">First Name:  <input class="form-input" type="text" name="firstName" id="firstName" required></label>
       
      </div>



      <div class="form-row">
        <label class="form-label" for="lastName">Last Name:</label>
        <input class="form-input" type="text" name="lastName" id="lastName" required>
      </div>
      <div class="form-row">
        <label class="form-label" for="email">Email:</label>
        <input class="form-input" type="email" name="email" id="email" required>
      </div>
      <div class="form-row">
        <label class="form-label" for="message">Message:</label>
        <textarea class="form-input" name="message" id="message" rows="4" required></textarea>
      </div>

      
      <!-- Hidden input fields to store user inputs -->
      <input type="hidden" id="confirmPackage" name="confirmPackage">
      <input type="hidden" id="confirmStayDuration" name="confirmStayDuration">
      <input type="hidden" id="confirmNumPeople" name="confirmNumPeople">
      <input type="hidden" id="confirmNumChild" name="confirmNumChild">
      <input type="hidden" id="confirmCheckInDate" name="confirmCheckInDate">
      <input type="hidden" id="confirmCheckOutDate" name="confirmCheckOutDate">
      <input type="hidden" id="confirmTotalPrice" name="confirmTotalPrice">
      <button class="confirm-button" onclick="confirmBooking()">Confirm</button>
    </div>  
  </div>
  

  <script>
    function showPackageDetails(package) {
      var detailsElement = document.getElementById('packageDetails');

      // Clear previous details
      detailsElement.innerHTML = '';

      // Update details based on the selected package
      if (package === 'All-Inclusive Fitness Package') {
        detailsElement.innerHTML = '<ul>' +
            '<li>Fitnes: Fitness Package</li>'+
            '<li>Fitnes: Fitness Package</li>'+
            '<li>Fitnes: Fitness Package</li>'+
            '</ul>';

      } else if (package === 'All-Inclusive Weight Loss Package') {
        detailsElement.innerHTML = '<ul>' +
            '<li>Weight loss Package</li>'+
            '<li> Weight loss Package</li>'+
            '<li>Weight loss Package</li>'+
            '</ul>';
      } else if (package === 'All-Inclusive Training Package') {
        detailsElement.innerHTML = '<ul>' +
            '<li> Training Package</li>'+
            '<li> Training Package</li>'+
            '<li> Training Package</li>'+
            '</ul>';
      }
    }

    function showEstimateCost() {
      var package = document.getElementById('bookingForm').elements['package'].value;
      var stayDuration = parseInt(document.getElementById('stayDuration').value);
      var numPeople = parseInt(document.getElementById('numPeople').value);
      var numChild = parseInt(document.getElementById('numChild').value);
      var basePrice = 2000;
      var childPrice = 600;
      var totalPrice = basePrice * stayDuration * numPeople;

      if (!isNaN(numChild) && numChild > 0) {
        totalPrice += childPrice * stayDuration * numChild;
      }

      var totalPriceElement = document.getElementById('totalPrice');

      if (package === 'All-Inclusive Fitness Package') {
        totalPriceElement.textContent = 'Php ' + totalPrice;
      } else if (package === 'All-Inclusive Weight Loss Package' || package === 'All-Inclusive Training Package') {
        totalPriceElement.textContent = 'Php ' + totalPrice + ' (based on selected package)';
      }
    }
    function showConfirmationModal() {
  var package = document.getElementById('bookingForm').elements['package'].value;
  //var package = document.getElementById('bookingForm').elements['roomType'].value;
  var stayDuration = document.getElementById('stayDuration').value;
  var numPeople = document.getElementById('numPeople').value;
  var numChild = document.getElementById('numChild').value;
  var checkInDate = document.getElementById('checkInDate').value;
  var checkOutDate = document.getElementById('checkOutDate').value;
  var totalPrice = document.getElementById('totalPrice').textContent;
 // var roomType = document.getElementById('package').textContent;
 var roomType = document.getElementById('roomType').value;
document.getElementById('confirmRoomType').textContent = roomType;


  // Assign user inputs to confirmation modal elements
  document.getElementById('confirmPackage').textContent = package;
  document.getElementById('confirmStayDuration').textContent = stayDuration;
  document.getElementById('confirmNumPeople').textContent = numPeople;
  document.getElementById('confirmNumChild').textContent = numChild;
  document.getElementById('confirmCheckInDate').textContent = checkInDate;
  document.getElementById('confirmCheckOutDate').textContent = checkOutDate;
  document.getElementById('confirmTotalPrice').textContent = totalPrice;
  //document.getElementById('confirmRoomType').textContent = roomType;

  // Calculate and display the estimated cost
  var estimateCost = calculateEstimateCost(package, stayDuration, numPeople, numChild);
  document.getElementById('confirmEstimateCost').textContent = estimateCost;

  openConfirmationModal();
}


function calculateEstimateCost(package, stayDuration, numPeople, numChild) {
  var basePrice = 2000;
  var childPrice = 600;
  var totalPrice = basePrice * stayDuration * numPeople;

  if (!isNaN(numChild) && numChild > 0) {
    totalPrice += childPrice * stayDuration * numChild;
  }

  return 'Php ' + totalPrice;
}


    function openConfirmationModal() {
  var modal = document.getElementById('confirmationModal');
  modal.style.display = 'block';
}

function closeConfirmationModal() {
  var modal = document.getElementById('confirmationModal');
  modal.style.display = 'none';
}

function sendBookingInfoToAirtable(firstName, lastName, email, message) {
  var apiKey = 'keyNCbwDkhsx0aaJm';
  var baseId = 'appKMSPBkiIwwl3Gl';
  var tableName = 'FCP Booking';

  var url = `https://api.airtable.com/v0/${baseId}/${tableName}`;
  var headers = {
    'Authorization': `Bearer ${apiKey}`,
    'Content-Type': 'application/json'
  };

 
  var package = document.getElementById('confirmPackage').textContent;
      var stayDuration = document.getElementById('confirmStayDuration').textContent;
      var numPeople = document.getElementById('confirmNumPeople').textContent;
      var numChild = document.getElementById('confirmNumChild').textContent;
      var totalPrice = document.getElementById('confirmTotalPrice').textContent;
      var checkInDate = document.getElementById('confirmCheckInDate').textContent;
      var checkOutDate = document.getElementById('confirmCheckOutDate').textContent;
      var roomType = document.getElementById('confirmRoomType').textContent;

      var data = {
        "fields": {
          "First-Name": firstName,
          "Last Name": lastName,
          "Email": email,
          "Message": message,
          "Package": package,
          "Number of Weeks": stayDuration,
          "Additional Adult": numPeople,
          "Additional Child": numChild,
          "Total Price": totalPrice,
          "Check-In Date": checkInDate,
          "Check-Out Date": checkOutDate,
          "Room Type": roomType
        }
      };

      fetch(url, {  
        method: 'POST',
        headers: headers,
        body: JSON.stringify(data)
      })
        .then(response => response.json())
        .then(result => {
          console.log('Booking information sent to Airtable:', result);
          // Show a success message to the user or perform any other desired action
        })
        .catch(error => {
          console.error('Error sending booking information to Airtable:', error);
          // Show an error message to the user or perform any other desired action
        });
    }

    function confirmBooking() {
      var firstName = document.getElementById('firstName').value;
      var lastName = document.getElementById('lastName').value;
      var email = document.getElementById('email').value;
      var message = document.getElementById('message').value;
      var missingFields = [];
      var emailRegex = /^[a-z0-9._%+-]+@[a-z0-9.-]+\.[a-z]{2,}$/i;

  
      if (firstName === '') {
      missingFields.push('First Name');
    }

    if (lastName === '') {
      missingFields.push('Last Name');
    }

  

    if (missingFields.length > 0) {
      var message = 'Please fill in the following required fields:\n';
      for (var i = 0; i < missingFields.length; i++) {
        message += '- ' + missingFields[i] + '\n';
      }
      alert(message);
      return;
    }
    if (!emailRegex.test(email)) {
        alert("Please enter a valid email address.");
        return;
      }

      sendBookingInfoToAirtable(firstName, lastName, email, message);

      // Close the confirmation modal or perform any other desired action
      closeConfirmationModal();

// Show a pop-up window with the success message
window.alert('Reservation was successful');
    }


    
  </script>
  
</body>
</html>
